/*
jQuery fullsizable plugin v2.0.2 <https://github.com/MSchmidt/jquery-fullsizable>
(c) 2011-2014 Matthias Schmidt <http://m-schmidt.eu/>
*/
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;e=jQuery;s="#jquery-fullsizable";f="#fullsized_image_holder";T="fullsized_spinner";t=e('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>');l=[];o=0;g=null;N=null;E=function(){var t,n;t=l[o];if((n=t.ratio)==null){t.ratio=(t.naturalHeight/t.naturalWidth).toFixed(2)}if(e(window).height()/t.ratio>e(window).width()){e(t).width(e(window).width());e(t).height(e(window).width()*t.ratio);return e(t).css("margin-top",(e(window).height()-e(t).height())/2)}else{e(t).height(e(window).height());e(t).width(e(window).height()/t.ratio);return e(t).css("margin-top",0)}};c=function(e){if(e.keyCode===27){i()}if(e.keyCode===37){w(true)}if(e.keyCode===39){return v(true)}};w=function(e){if(e==null){e=false}if(o>0){return x(l[o-1],-1,e)}};v=function(e){if(e==null){e=false}if(o<l.length-1){return x(l[o+1],1,e)}};x=function(t,n,r){if(n==null){n=1}if(r==null){r=false}o=t.index;e(f).hide();e(f).html(t);if(g.navigation){if(r===true){a()}else{S()}}if(t.loaded!=null){e(s).removeClass(T);E();e(f).fadeIn("fast");return y(n)}else{e(s).addClass(T);t.onload=function(){E();e(f).fadeIn("slow",function(){return e(s).removeClass(T)});this.loaded=true;return y(n)};return t.src=t.buffer_src}};y=function(e){var t;if(e===1&&o<l.length-1){t=l[o+1]}else if((e===-1||o===l.length-1)&&o>0){t=l[o-1]}else{return}t.onload=function(){return this.loaded=true};if(t.src===""){return t.src=t.buffer_src}};m=function(r,i){e("body").append(t);e(window).bind("resize",E);x(r);return e(s).hide().fadeIn(function(){if(g.detach_id!=null){N=e(window).scrollTop();e("#"+g.detach_id).css("display","none");E()}n();return e(document).trigger("fullsizable:opened",i)})};i=function(){if(g.detach_id!=null){e("#"+g.detach_id).css("display","block");e(window).scrollTop(N)}e(s).fadeOut(function(){return t.remove()});r();e(s).removeClass(T);k();e(document).trigger("fullsizable:closed");return e(window).unbind("resize",E)};h=function(){l.length=0;return e(g.selector).each(function(){var t;t=new Image;t.buffer_src=e(this).attr("href");t.index=l.length;l.push(t);if(g.openOnClick){return e(this).click(function(e){e.preventDefault();if(g.reloadOnOpen){h()}return m(t,this)})}})};b=function(){if(g.navigation){t.append('<a id="fullsized_go_prev" href="#prev"></a><a id="fullsized_go_next" href="#next"></a>');e(document).on("click","#fullsized_go_prev",function(e){e.preventDefault();e.stopPropagation();return w()});e(document).on("click","#fullsized_go_next",function(e){e.preventDefault();e.stopPropagation();return v()})}if(g.closeButton){t.append('<a id="fullsized_close" href="#close"></a>');e(document).on("click","#fullsized_close",function(e){e.preventDefault();e.stopPropagation();return i()})}if(g.fullscreenButton&&u()){t.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>');e(document).on("click","#fullsized_fullscreen",function(e){e.preventDefault();e.stopPropagation();return C()})}switch(g.clickBehaviour){case"close":return e(document).on("click",s,i);case"next":return e(document).on("click",s,function(){return v(true)})}};n=function(){e(document).bind("keydown",c);e(document).bind("fullsizable:next",function(){return v(true)});e(document).bind("fullsizable:prev",function(){return w(true)});return e(document).bind("fullsizable:close",i)};k=function(){e(document).unbind("keydown",c);e(document).unbind("fullsizable:next");e(document).unbind("fullsizable:prev");return e(document).unbind("fullsizable:close")};a=function(){var e;e=t.find("a");if(e.is(":visible")===true){e.toggle(false);return t.bind("mousemove",p)}};d=null;p=function(e){var n;if(d===null){d=[e.clientX,e.clientY]}n=Math.round(Math.sqrt(Math.pow(d[1]-e.clientY,2)+Math.pow(d[0]-e.clientX,2)));if(n>=10){t.unbind("mousemove",p);d=null;return S()}};S=function(){e("#fullsized_close, #fullsized_fullscreen").toggle(true);e("#fullsized_go_prev").toggle(o!==0);return e("#fullsized_go_next").toggle(o!==l.length-1)};e.fn.fullsizable=function(t){g=e.extend({selector:this.selector,detach_id:null,navigation:true,closeButton:true,fullscreenButton:true,openOnClick:true,clickBehaviour:"close",preload:true,reloadOnOpen:false},t||{});b();if(g.preload){h()}e(document).bind("fullsizable:reload",h);e(document).bind("fullsizable:open",function(t,n){var r,i,s,o;if(g.reloadOnOpen){h()}o=[];for(i=0,s=l.length;i<s;i++){r=l[i];if(r.buffer_src===e(n).attr("href")){o.push(m(r,n))}else{o.push(void 0)}}return o});return this};u=function(){var e;e=t.get(0);if(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen){return true}else{return false}};r=function(){return C(true)};C=function(e){var n;n=t.get(0);if(n.requestFullScreen){if(document.fullScreen||e){return document.exitFullScreen()}else{return n.requestFullScreen()}}else if(n.webkitRequestFullScreen){if(document.webkitIsFullScreen||e){return document.webkitCancelFullScreen()}else{return n.webkitRequestFullScreen()}}else if(n.mozRequestFullScreen){if(document.mozFullScreen||e){return document.mozCancelFullScreen()}else{return n.mozRequestFullScreen()}}}}).call(this)